<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ydf-users] YDAjax autocompleter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/ydframework-users/2006-March/index.html" >
   <LINK REL="made" HREF="mailto:ydframework-users%40lists.berlios.de?Subject=Re%3A%20%5Bydf-users%5D%20YDAjax%20autocompleter&In-Reply-To=%3C441C223A.4090702%40fusemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000117.html">
   <LINK REL="Next"  HREF="000106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ydf-users] YDAjax autocompleter</H1>
    <B>Francisco Azevedo</B> 
    <A HREF="mailto:ydframework-users%40lists.berlios.de?Subject=Re%3A%20%5Bydf-users%5D%20YDAjax%20autocompleter&In-Reply-To=%3C441C223A.4090702%40fusemail.com%3E"
       TITLE="[ydf-users] YDAjax autocompleter">francisco at fusemail.com
       </A><BR>
    <I>Sat Mar 18 16:07:38 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000117.html">[ydf-users] YDAjax autocompleter
</A></li>
        <LI>Next message: <A HREF="000106.html">[ydf-users] Content Management Framework proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#119">[ date ]</a>
              <a href="thread.html#119">[ thread ]</a>
              <a href="subject.html#119">[ subject ]</a>
              <a href="author.html#119">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi dab

&gt;<i> finally got it to work, i just had to keep the field
</I>&gt;<i> argument different than the autocompleter name and it
</I>&gt;<i> works. 
</I>&gt;<i> thanks a lot for your help =)
</I>
Cool. No problem.. ;)

Francisco A


&gt;<i> 
</I>&gt;&gt;<i> hi dab
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  &gt; i had 1778 too and reversed it to 1775 and it
</I>&gt;&gt;<i> works
</I>&gt;&gt;<i>  &gt; now. i have PHP Version 5.1.1.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sorry to disapoint you again but i don't have any
</I>&gt;&gt;<i> problems with 1778 
</I>&gt;&gt;<i> (using php 5.1.2).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is there someone, like dab, that cannot see the
</I>&gt;&gt;<i> examples?
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> and maybe i can't do what i'm trying to do, none
</I>&gt;&gt;<i> of
</I>&gt;&gt;&gt;<i> the examples does what i want to do :(
</I>&gt;&gt;&gt;<i> i use the autocompleter a lot across the site so
</I>&gt;&gt;<i> it
</I>&gt;&gt;&gt;<i> would be good to use the same function for all
</I>&gt;&gt;&gt;<i> autocompleter elements (by passing arguments on
</I>&gt;&gt;<i> each
</I>&gt;&gt;&gt;<i> element instead of writing a function for each
</I>&gt;&gt;&gt;<i> element).
</I>&gt;&gt;<i> dab, each autocompleter has its own ajax call and
</I>&gt;&gt;<i> you must define what 
</I>&gt;&gt;<i> do you want in that call. By default the
</I>&gt;&gt;<i> autocompleter sends its content 
</I>&gt;&gt;<i> but you can define other arguments.
</I>&gt;&gt;<i> If you want to use 1 php server function for all
</I>&gt;&gt;<i> autocompleters (like 
</I>&gt;&gt;<i> the autocompleter example where you have 2
</I>&gt;&gt;<i> autocompleters that send 
</I>&gt;&gt;<i> their contents to a shared php function) and you
</I>&gt;&gt;<i> want to know (inside 
</I>&gt;&gt;<i> the php function) what autocompleter made the ajax
</I>&gt;&gt;<i> call you can, eg, 
</I>&gt;&gt;<i> define in each autocompleter call some static values
</I>&gt;&gt;<i> that define the 
</I>&gt;&gt;<i> field and table.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> $form-&gt;addElement('autocompleter_1', 'a1', 'label',
</I>&gt;&gt;<i> '', array( &amp;$this, 
</I>&gt;&gt;<i> 'getElement', array( 'a1', '1, 'firstname1', 'user1'
</I>&gt;&gt;<i> ) );
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> $form-&gt;addElement('autocompleter_2', 'a2', 'label',
</I>&gt;&gt;<i> '', array( &amp;$this, 
</I>&gt;&gt;<i> 'getElement', array( 'a2', '2', 'firstnameX',
</I>&gt;&gt;<i> 'userX' ) );
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> $form-&gt;addElement('autocompleter_3', 'a3', 'label',
</I>&gt;&gt;<i> '', array( &amp;$this, 
</I>&gt;&gt;<i> 'getElement', array( 'a3', '3', 'firstnameZ',
</I>&gt;&gt;<i> 'userZ' ) );
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> then you only need to define the php function like:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> function getElement( $autocompleterContent, $id,
</I>&gt;&gt;<i> $field, $table ){
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>       $dbo = YDDatabaseObject::getInstance ( $table
</I>&gt;&gt;<i> );
</I>&gt;&gt;<i>       $dbo-&gt;select ( 'id', $field );
</I>&gt;&gt;<i>       $dbo-&gt;find();
</I>&gt;&gt;<i>       $db = $dbo-&gt;getResultsAsAssocArray( 'id',
</I>&gt;&gt;<i> $field );
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>       // initialize result array
</I>&gt;&gt;<i>       $result = array();
</I>&gt;&gt;<i>   	
</I>&gt;&gt;<i>       // check db for text matches and store them in
</I>&gt;&gt;<i> result
</I>&gt;&gt;<i>       foreach( $db as $el )
</I>&gt;&gt;<i>          if (eregi(&quot;^&quot;. $text .&quot;+&quot;, $el)) $result[]
</I>&gt;&gt;<i> = $el;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>       // assign result to current completer
</I>&gt;&gt;<i>       $this-&gt;ajax-&gt;addCompleterResult( $result );
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>       // return response to client browser
</I>&gt;&gt;<i>       return $this-&gt;ajax-&gt;processResults();
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> as you will see getElement will get:
</I>&gt;&gt;<i> - autocompleter content + '1' string + 'firstname1'
</I>&gt;&gt;<i> string + 'user1' 
</I>&gt;&gt;<i> string.. when call is made from 'a1'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - autocompleter content + '1' string + 'firstnameX'
</I>&gt;&gt;<i> string + 'userX' 
</I>&gt;&gt;<i> string.. when call is made from 'a2'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - autocompleter content + '1' string + 'firstnameZ'
</I>&gt;&gt;<i> string + 'userZ' 
</I>&gt;&gt;<i> string.. when call is made from 'a3'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> .. and if you inspect the code, YDAjax will try to
</I>&gt;&gt;<i> reuse functions.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Francisco A
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> the below code works, but i want set the field and
</I>&gt;&gt;&gt;<i> table variables with values passed as arguments.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> do you think this is possible with current ydajax
</I>&gt;&gt;&gt;<i> functionality?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> function getElement( $text ){
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     $field = 'firstname';
</I>&gt;&gt;&gt;<i>     $table = 'user';
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     $dbo = YDDatabaseObject::getInstance ( $table
</I>&gt;&gt;<i> );
</I>&gt;&gt;&gt;<i>     $dbo-&gt;select ( 'id', $field );
</I>&gt;&gt;&gt;<i>     $dbo-&gt;find();
</I>&gt;&gt;&gt;<i>     $db = $dbo-&gt;getResultsAsAssocArray( 'id',
</I>&gt;&gt;<i> $field
</I>&gt;&gt;&gt;<i> );
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 	// initialize result array
</I>&gt;&gt;&gt;<i> 	$result = array();
</I>&gt;&gt;&gt;<i> 	
</I>&gt;&gt;&gt;<i> 	// check db for text matches and store them in
</I>&gt;&gt;<i> result
</I>&gt;&gt;&gt;<i> array
</I>&gt;&gt;&gt;<i> 	foreach( $db as $el )
</I>&gt;&gt;&gt;<i> 		if (eregi(&quot;^&quot;. $text .&quot;+&quot;, $el)) $result[] =
</I>&gt;&gt;<i> $el;
</I>&gt;&gt;&gt;<i> 	// assign result to current completer (YDAjax
</I>&gt;&gt;&gt;<i> automagically detects the autocompleter that made
</I>&gt;&gt;<i> this
</I>&gt;&gt;&gt;<i> call)
</I>&gt;&gt;&gt;<i> 	$this-&gt;ajax-&gt;addCompleterResult( $result );
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 	// return response to client browser
</I>&gt;&gt;&gt;<i> 	return $this-&gt;ajax-&gt;processResults();
</I>&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --- Francisco Azevedo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/ydframework-users">francisco at fusemail.com</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> dab
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> If you want functions you cannot add events to
</I>&gt;&gt;<i> form
</I>&gt;&gt;&gt;&gt;<i> elements. You must 
</I>&gt;&gt;&gt;&gt;<i> create the js function.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Second, you have 3 types of arguments that you can
</I>&gt;&gt;&gt;&gt;<i> pass on addEvent:
</I>&gt;&gt;&gt;&gt;<i> - form element names
</I>&gt;&gt;&gt;&gt;<i> - static string/int/float values
</I>&gt;&gt;&gt;&gt;<i> - dynamic js arguments from the function
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Remember that dynamic arguments can only be used
</I>&gt;&gt;<i> on
</I>&gt;&gt;&gt;&gt;<i> events added as 
</I>&gt;&gt;&gt;&gt;<i> functions.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> So, if you want to make _one_ js function that
</I>&gt;&gt;<i> sends
</I>&gt;&gt;&gt;&gt;<i> in the ajax call 1 
</I>&gt;&gt;&gt;&gt;<i> dynamic js variable you must add an event like:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> $this-&gt;ajax-&gt;addEvent( 'customJSFunction(x)',
</I>&gt;&gt;<i> array(
</I>&gt;&gt;&gt;&gt;<i> &amp; $this, 
</I>&gt;&gt;&gt;&gt;<i> 'phpFunction' ), 'var x' );
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 'var x' is a terminology for js variables defined
</I>&gt;&gt;<i> in
</I>&gt;&gt;&gt;&gt;<i> the function name.
</I>&gt;&gt;&gt;&gt;<i> Take a look to the YDAjax example &quot;Without a
</I>&gt;&gt;&gt;&gt;<i> YDForm&quot;.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> i want to pass two variables so i can have 1 ajax
</I>&gt;&gt;&gt;&gt;&gt;<i> function for all elements instead of having 1
</I>&gt;&gt;<i> ajax
</I>&gt;&gt;&gt;&gt;&gt;<i> function for each element.
</I>&gt;&gt;&gt;&gt;&gt;<i> but i did an update yesterday and now nothing
</I>&gt;&gt;&gt;&gt;<i> seems to
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> work. none of the example works and
</I>&gt;&gt;&gt;&gt;<i> autocompleter.php
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> gives me:
</I>&gt;&gt;&gt;&gt;&gt;<i> Fatal error: Call to a member function
</I>&gt;&gt;&gt;&gt;<i> getElement() on
</I>&gt;<i> === message truncated ===
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> __________________________________________________
</I>&gt;<i> Do You Yahoo!?
</I>&gt;<i> Tired of spam?  Yahoo! Mail has the best spam protection around 
</I>&gt;<i> <A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> YDFramework-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/ydframework-users">YDFramework-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="http://lists.berlios.de/mailman/listinfo/ydframework-users">http://lists.berlios.de/mailman/listinfo/ydframework-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000117.html">[ydf-users] YDAjax autocompleter
</A></li>
	<LI>Next message: <A HREF="000106.html">[ydf-users] Content Management Framework proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#119">[ date ]</a>
              <a href="thread.html#119">[ thread ]</a>
              <a href="subject.html#119">[ subject ]</a>
              <a href="author.html#119">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/ydframework-users">More information about the YDFramework-users
mailing list</a><br>
</body></html>
