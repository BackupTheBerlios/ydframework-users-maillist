<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ydf-users] YDDatabaseObject issue
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/ydframework-users/2006-February/index.html" >
   <LINK REL="made" HREF="mailto:ydframework-users%40lists.berlios.de?Subject=Re%3A%20%5Bydf-users%5D%20YDDatabaseObject%20issue&In-Reply-To=%3C43EF83D3.7070801%40fusemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000023.html">
   <LINK REL="Next"  HREF="000025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ydf-users] YDDatabaseObject issue</H1>
    <B>Francisco Azevedo</B> 
    <A HREF="mailto:ydframework-users%40lists.berlios.de?Subject=Re%3A%20%5Bydf-users%5D%20YDDatabaseObject%20issue&In-Reply-To=%3C43EF83D3.7070801%40fusemail.com%3E"
       TITLE="[ydf-users] YDDatabaseObject issue">francisco at fusemail.com
       </A><BR>
    <I>Sun Feb 12 19:52:03 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000023.html">[ydf-users] YDDatabaseObject issue
</A></li>
        <LI>Next message: <A HREF="000025.html">[ydf-users] YDDatabaseObject issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24">[ date ]</a>
              <a href="thread.html#24">[ thread ]</a>
              <a href="subject.html#24">[ subject ]</a>
              <a href="author.html#24">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> 
</I>&gt;<i> I have a question on the YDDatabaseObject class, which may be something 
</I>&gt;<i> obvious I'm missing, or mabe something bigger. I like to retrieve a list 
</I>&gt;<i> of artists with the number of albums they have released.
</I>&gt;<i> In plain sql, my first thought was:
</I>&gt;<i> 
</I>&gt;<i> SELECT artist.name, count(album.id) AS numalbums FROM artist,album WHERE 
</I>&gt;<i> album.artistid=artist.id GROUP BY artist.id
</I>&gt;<i> 
</I>&gt;<i> But that one leaves out the artists which have no albums (yet), instead 
</I>&gt;<i> of having numalbums set to 0.
</I>&gt;<i> So even my plain sql solution doesn't work right. But when I try to 
</I>&gt;<i> accomplish this in YDDatabaseObject, it keeps whining about count not 
</I>&gt;<i> being a registered fieldname (which is correct of course)
</I>&gt;<i> I currently retrieve the artists, loop through them, get all the albums 
</I>&gt;<i> for the current artist, and use the count() method, but that's not very 
</I>&gt;<i> resouce efficient, not to mention slow...
</I>&gt;<i> So, the basic question is, what is the proper way to get such an sql 
</I>&gt;<i> result? and secondly, any hints on how to get the results I want 
</I>&gt;<i> (including the artists with no albums) are welcome.
</I>
I'm not the db expert here :) but, imho, you should use an LEFT join.
An LEFT join will join your artist table with your albums table and 
return all artist names (even if your album table don't have those ids).

&gt;<i> Secondly, if I retrieve a list of albums with artists, both tables have 
</I>&gt;<i> a 'name' field, which causes all sorts of problems of course. How do for 
</I>&gt;<i> instance say that the name field in artist should be returned as 
</I>&gt;<i> 'artistname'?
</I>
Afaik, when you define a relation and get those values, event if you 
have a 'name' in albuns and a 'name' in artists, YDDatabaseObject will 
transform the artists 'name' in 'artist_name'.

Francisco

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000023.html">[ydf-users] YDDatabaseObject issue
</A></li>
	<LI>Next message: <A HREF="000025.html">[ydf-users] YDDatabaseObject issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24">[ date ]</a>
              <a href="thread.html#24">[ thread ]</a>
              <a href="subject.html#24">[ subject ]</a>
              <a href="author.html#24">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/ydframework-users">More information about the YDFramework-users
mailing list</a><br>
</body></html>
